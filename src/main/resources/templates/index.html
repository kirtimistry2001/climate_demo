<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Climate Summary</title>

<link th:rel="stylesheet"
	th:href="@{js/daterangepicker/daterangepicker.css}" />
<link th:rel="stylesheet"
	th:href="@{webjars/bootstrap/4.0.0-2/css/bootstrap.min.css} " />
<link th:rel="stylesheet"
	th:href="@{webjars/font-awesome/5.11.2/css/all.css} " />
<link th:rel="stylesheet"
	th:href="@{css/custom.css}" />
<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{js/moment/moment.min.js}"></script>
<script th:src="@{js/daterangepicker/daterangepicker.js}"></script>
<script th:src="@{js/custom.js}" type='text/javascript'></script>
    
<!--     <script th:src="@{/webjars/jquery/jquery.min.js}"></script> -->
<!--     <script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script> -->
<!--     <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script> -->
<!--     <script th:src="@{assets/bootstrap-datepicker/js/bootstrap-datepicker.js}"></script> -->

</head>

<body>
	<div class="container my-2">
	 <div class="title">
		<h3 class="title" th:text="#{app.title}">Climate Summary</h3>
	 </div>
	 	<!-- Search Form -->
		<div id="form_div">
			 <form method="post" th:object="${dataFilter}">
				<table>
					<tr>
						<td>
						</td>
						<td> &nbsp;
<!-- 						<div> -->
<!-- 							<div class="input-group date"> -->
<!-- 								<label for="datefrom">Date From:</label>  -->
<!-- 								<input type="text" -->
<!-- 									class="form-control" id="datefrom" autocomplete="off" -->
<!-- 									th:field="${dataFilter.dateFrom}" /> -->
<!-- 								<div class="input-group-append"> -->
<!-- 									<span class="input-group-text"><i -->
<!-- 										class="far fa-calendar-alt"></i></span> -->
<!-- 								</div> -->
<!-- 							</div>  -->
<!-- 							<div class="input-group date"> -->
<!-- 								<label for="dateTo">Date To:</label>  -->
<!-- 								<input type="text" -->
<!-- 									class="form-control" id="dateTo" autocomplete="off" -->
<!-- 									th:field="${dataFilter.dateTo}" /> -->
<!-- 								<div class="input-group-append"> -->
<!-- 									<span class="input-group-text"><i -->
<!-- 										class="far fa-calendar-alt"></i></span> -->
<!-- 								</div> -->
<!-- 							</div> -->
<!-- 						</div>	 -->
							<div class="input-group">
								<label for="dateTo">Date Range:</label>
								<input type="text" class="form-control" id="dataFilter"
									autocomplete="off" />
								<div class="input-group-append">
									<span class="input-group-text"><i
										class="far fa-calendar-alt"></i></span>
								</div>
							</div>
							<input type="hidden" name="dateFrom" th:field="${dataFilter.dateFrom}"/>
            				<input type="hidden" name="dateTo" th:field="${dataFilter.dateTo}"/>
							 &nbsp;
						</td>
						<td align="left" colspan="2">
							Search Keyword: 
							<input type="text" name="keyword" id="keyword" size="20"
							th:value="${dataFilter.keyword}" />
						</td>
						<td>&nbsp; 
							<input type="submit" value="Search" /> &nbsp; 
							<input type="button" value="Clear" id="btnClear" onclick="clearSearch()" />
						</td>

					</tr>
				</table>
			</form>
		</div>
		<!-- Records to display -->
		<div>
		<table border="1" class="table table-striped table-responsive-md">
			<thead>
				<tr>
					<th><a
						th:href="@{'/page/' + ${currentPage} + '?sortField=stationName&sortDir=' + ${reverseSortDir}}">Station
							Name</a></th>
					<th><a
						th:href="@{'/page/' + ${currentPage} + '?sortField=climateDate&sortDir=' + ${reverseSortDir}}">Date</a>
					</th>
					<th><a
						th:href="@{'/page/' + ${currentPage} + '?sortField=meanTemp&sortDir=' + ${reverseSortDir}}">Mean
							Temperature</a></th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="climate:${summaryList}">
					<td th:text="${climate.stationName}"></td>
					<td
						th:text="${#calendars.format(climate.climateDate,'dd-MMM-yyyy')}"></td>
					<td>
						<!-- Hyperlink to open detail page --> <a
						th:href="@{'/detail/' + ${climate.stationName}
                   						+ '/' + ${climate.province}
                   						+ '/' +${climate.climateDate}}"
						th:text="${climate.meanTemp}"></a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
		<!-- Number of entries per page -->
		<div>
		Total Rows: [[${totalItems}]] 
		</br>
			<label for="pageSize">Show</label> 
			<input id="pagesize" type="number"
				min="10" max="100" step="10" th:value="${pageSize}">&nbsp; rows per page</input> 

		</div>
		<!-- display selected sort fields name with it direction/order -->
		<div>
			<i>Sorted by [[${sortField}]] in [[${sortDir}]] order</i>
		</div>
		<div>&nbsp;</div>

		<!-- Navigation buttons for pages -->
		<div th:if="${totalPages > 1}">
			<a th:if="${currentPage > 1}"
				th:href="@{'/page/1' + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">First</a>
			<span th:unless="${currentPage > 1}">First</span> &nbsp;&nbsp; <a
				th:if="${currentPage > 1}"
				th:href="@{'/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Previous</a>
			<span th:unless="${currentPage > 1}">Previous</span> &nbsp;&nbsp; <span
				th:each="i: ${#numbers.sequence(1, totalPages)}"> <a
				th:if="${currentPage != i}"
				th:href="@{'/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
				<span th:unless="${currentPage != i}">[[${i}]]</span> &nbsp;
			</span> <a th:if="${currentPage < totalPages}"
				th:href="@{'/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
			<span th:unless="${currentPage < totalPages}">Next</span>
			&nbsp;&nbsp; <a th:if="${currentPage < totalPages}"
				th:href="@{'/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
			<span th:unless="${currentPage < totalPages}">Last</span>
		</div>
	</div>
	
	<script>
   var $dataFilter= $('#dataFilter');
    $dataFilter.daterangepicker({
    	  showDropdowns: true,
    	  format: 'MM/DD/YYYY'
    	});
    $dataFilter.on('apply.daterangepicker', function (ev, picker) {
        $('input[name="dateFrom"]').val(picker.startDate.format('MM/DD/YYYY'));
        $('input[name="dateTo"]').val(picker.endDate.format('MM/DD/YYYY'));
    });

//     $('.input-group.date').datepicker({
//         autoclose: true,
//         todayHighlight: true,
//         format: "MM/dd/yyyy"
//     });
    
    function clearSearch() {
        window.location = "[[@{/}]]";
    }

</script>
</body>
</html>